{% extends 'main_app/base.html' %}

{% block content %}
<div class="list-container">
    <div class="list-header">
      <h2>My Skills</h2>
    </div>
    <!-- Search and Filter Section -->
    <div class="search-section">
        <form method="get" class="search-form">
            <div class="search-inputs">
                <input type="text" name="search" placeholder="Search skills by name or description..." value="{{ request.GET.search }}" class="search-input">
                <select name="category" class="filter-select">
                    <option value="">All Categories</option>
                    {% for category in categories %}
                        <option value="{{ category }}" {% if request.GET.category == category %}selected{% endif %}>{{ category }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn-primary">Search</button>
                {% if request.GET.search or request.GET.category %}
                    <a href="{% url 'main_app:skills_list' %}" class="btn-secondary">Clear</a>
                {% endif %}
            </div>
        </form>
    </div>
{% if skills %}
  <a href="{% url 'main_app:skill_create' %}" class="btn-primary">Add New Skill</a>
  <div class="skills-grid">
    {% for skill in skills %}
      <div class="skill-card">
        <h3>{{ skill.title }}</h3>
        <p><strong>Category:</strong> {{ skill.category|default:"No category" }}</p>
        <p>{{ skill.description | truncatewords:20 }}</p>
        
        <div class="progress-section">
          <div class="progress-bar">
            <div class="progress-fill" style="width: {{ skill.progress }}%"></div>
          </div>
          <p> <strong> Progress:</strong> {{ skill.progress }}%</p>
        </div>


        <div class="skill-actions">
        <a href="{% url 'main_app:skill_detail' skill.id %}" class="btn-primary">View Details</a>
        <a href="{% url 'main_app:skill_edit' skill.id %}" class="btn-edit">Edit</a>
        <a href="{% url 'main_app:skill_delete' skill.id %}" class="btn-delete">Delete</a>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="empty-state">
      <div class="empty-state-content">
          <h3>ðŸš€ Start Building Your Skill Portfolio!</h3>
          <p>Skills are abilities you want to develop or track progress on. Here are some examples:</p>
          <ul class="example-list">
              <li>Programming languages (Python, JavaScript, Java)</li>
              <li>Design skills (Photoshop, UI/UX Design)</li>
              <li>Languages (Spanish, French, Arabic)</li>
              <li>Professional skills (Public Speaking, Project Management)</li>
          </ul>
          <p>Add your first skill to start tracking your learning journey!</p>
          <a href="{% url 'main_app:skill_create' %}" class="btn-primary btn-large">ðŸš€ Add your first skill! </a>
        </div>
  </div>
{% endif %}

<a href="{% url 'main_app:home' %}" class="btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}